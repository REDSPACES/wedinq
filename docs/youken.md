### **フェーズ 0：アイデア整理＆要件定義**

- このシステムの概要：結婚式披露宴で催し物として活用のできるクイズ Web アプリを作成する。QR コード付き席札の付加価値として販売する。

- ターゲット：新郎新婦
- 提供価値の整理：
  - ゲスト参加型のクイズで披露宴を盛り上げる
  - 席札に URL／QR コードを印刷し、スマホからアクセス可能とし、ゲストの負担を下げる
  - クイズ結果をその場でリアルタイム表示し、テレビ番組のオールスター感謝祭風にする
  - 式後にデータ（参加者数、成績）をスライドで提供する
- 料金モデル：席札印刷（1 枚 180 円）＋ Web アプリ利用料（0 円）最小単位 30 名〜(最低利用料金 5400 円)
  - 原価：席札 25 円/枚
- 競合・既存サービス調査：
  - 席札つきのプランはみたことがないので、提供価値あり
  - キャンバで質問回答を提供いただき、実装はこちらで行う方向とし、顧客側の作成手間を省く
- 印刷物（席札）：自作、実績あり
- 法務・契約／著作権・個人情報対応：明確な個人情報は扱わない、ニックネーム。クイズにおいても詳細すぎる個人情報を含むクイズは控えるように喚起する
- MVP（最小実用版）スコープを決める：まずはシンプルなクイズ機能＋席札配布までを対象

### **フェーズ 1：MVP 開発 &テスト運用**

- Web アプリ基本機能開発：
  - ゲスト参加画面（URL/QR 経由でスマホから参加）
  - クイズ表示・リアルタイム集計・得点表示画面（スクリーン表示用）
- クイズ作成画面（新郎新婦が質問を入力する →Canva で対応、開発者側で画面作成）
- インフラ・ホスティング設計（例えば Vercel + Supabase／AWS／Heroku など）
- テスト運用：新郎新婦むけへプロトタイプお渡し、UI／UX・運用手順を検証
- 利用マニュアル・設置ガイド作成：式場スタッフ・司会者が操作できるようなガイドを用意
- 司会者読み上げ台本作成
- フィードバック収集と改善：ゲスト・式場・新郎新婦からの UX／運用面の課題を洗い出し

### **フェーズ 2：正式リリース／販売開始**

- Web サイト・販売ページ構築：メルカリ販売用サムネイル
- マーケティング：SNS/instagram/youtube でプロモーション
- サポート体制構築：式当日のトラブル対応なし、Web アプリの安定運用（スケーラビリティ・可用性）
- 運用データ収集・分析：何件導入、平均ゲスト数、参加率、満足度など KPI を定義

### **フェーズ 3：拡張・スケール化**

- 他イベント展開（結婚式以外のパーティ、会社の懇親会、周年記念など）
- ブランド化・テンプレート販売・ホワイトラベル式場提供モデル

---

## **3. 注意すべきポイント／リスク**

- ゲストのスマホ利用状況（電波・WiFi・機器トラブル）を想定：会場のインフラ確認必須
- クイズ参加のハードル（QR 読み込み／ログイン不要）を低く設計
- 席札印刷の納期・誤配、オペレーション面の手厚さが重要
- プライバシー・個人情報保護（ゲストの氏名や成績を扱う場合）と著作権（クイズ画像・BGM 等）
- 式場との調整（進行タイミング・司会との連携・スクリーン表示）
- 価格設定・収益モデルが合っているか（席札印刷コスト・Web サーバーコスト・サポートコスト）

- **機能要件：**
  必要画面

1. ゲスト参加画面(スマートフォン)
2. スクリーン用スライド画面（スライド 16:9）

詳細 1. ゲスト参加画面：画面遷移 1. 席札 QR アクセスで挨拶画面＆クイズを始めるボタンを表示 2. ニックネーム入力フォーム＆クイズスタートボタン 3. クイズ内容と回答セレクトボタン表示、回答送信ボタン配置 4. スライド画面の遷移に合わせてスマホ画面遷移 5. クイズ終了後は「ご参加ありがとうございました」 6. 結果は前のスクリーンで表示 7. クイズ画面離脱後の再アクセス時はその際のスクリーン画面ステータスに応じてスマホ表示
（例：第１問の回答中に離脱 → 再アクセス時のステータスが第２問の回答であればその画面からスタート）

    2. スクリーン用スライド画面　リアルタイム結果表示
        1. QRコードを表示させる画面
        2. 設問１〜５を表示、右上にはカウントダウン30秒
        3. 画面遷移と、スマートフォンの遷移を合わせる
        4. 画面遷移はクリックにて行う
        5. 結果表示画面　正解者のうち、回答が一番早かった順にユーザーをランキング表示する（3位まで）


sequenceDiagram
participant Guest as 🧑‍💐 ゲスト（スマホ）
participant Screen as 🖥️ スクリーン（スライド）
participant DB as 🗄️ Supabase（Realtime）

    %% --- 開始前 ---
    Screen->>Guest: QRコード表示（席札に印刷）
    Guest->>Guest: QRコード読み取り・アクセス
    Guest->>Screen: 参加アクセス通知（optional）

    %% --- 参加登録 ---
    Guest->>DB: ニックネーム送信・登録
    DB-->>Guest: 登録完了応答

    %% --- クイズ開始 ---
    Screen->>DB: status='playing', current_question=1 を更新
    DB-->>Guest: Realtime通知（設問1を表示）
    Guest->>Guest: 設問1を表示（選択肢＋送信）

    %% --- 回答処理 ---
    Guest->>DB: 回答データ送信(choice, time)
    DB-->>Screen: Realtimeで回答結果更新
    Screen->>Screen: 正解者・最速回答者を集計

    %% --- 次の問題へ ---
    Screen->>DB: current_question++
    DB-->>Guest: Realtime通知（設問2を表示）
    Guest->>Guest: 自動で画面切替（設問2〜5）

    %% --- 最終問題・結果表示 ---
    Screen->>DB: status='finished' に更新
    DB-->>Guest: Realtime通知（終了画面表示）
    Screen->>Screen: 正解者TOP3をランキング表示
    Screen-->>Guest: 結果発表（視聴のみ）

    %% --- フィナーレ ---
    Screen->>Guest: 「ご参加ありがとうございました」表示
    Note over Guest,Screen: 全体終了

## **🧭 状態遷移表（クイズセッション全体）**

| **状態名**   | **説明**                      | **遷移イベント**       | **次の状態**                         | **主体**                   |
| ------------ | ----------------------------- | ---------------------- | ------------------------------------ | -------------------------- |
| **waiting**  | ゲスト受付中（QR コード表示） | スクリーン操作「開始」 | playing / question=1                 | スクリーン                 |
| **playing**  | クイズ進行中（設問 1〜5）     | next_question トリガー | playing（question++）または finished | スクリーン                 |
| **finished** | 全設問終了／結果発表表示中    | reset_session          | waiting                              | スクリーン（または管理者） |

## **📱 ゲスト画面の状態遷移**

| **状態名**           | **表示内容**                     | **トリガーイベント**                 | **次の状態**         | **備考**                                 |
| -------------------- | -------------------------------- | ------------------------------------ | -------------------- | ---------------------------------------- |
| **intro**            | 「クイズを始める」ボタン         | 「始める」クリック                   | nickname_input       | 席札 QR からアクセス                     |
| **nickname_input**   | ニックネーム入力フォーム         | 「スタート」クリック                 | waiting_for_question | Supabase に登録                          |
| **question_display** | 設問と選択肢を表示               | 回答送信（submit）                   | waiting_next         | answer 保存                              |
| **waiting_next**     | 「次の問題の準備中…」            | Realtime: session.current_question++ | question_display     | 自動遷移                                 |
| **finished**         | 「ご参加ありがとうございました」 | Realtime: session.status=finished    | end                  | 最終画面固定                             |
| **end**              | 終了済み（操作不可）             | —                                    | —                    | 再接続時は「結果を見られません」など表示 |

## **🖥️ スクリーン画面（スライド）の状態遷移**

| **状態名**           | **表示内容**                   | **トリガー**                     | **次の状態**                     | **備考**                 |
| -------------------- | ------------------------------ | -------------------------------- | -------------------------------- | ------------------------ |
| **standby**          | QR コード・待機画面            | 「開始」クリック                 | question_display                 | ゲスト接続を待つ         |
| **question_display** | 設問 n を表示、カウントダウン  | 「次へ」クリック or タイマー終了 | next_question or result_display  | current_question++       |
| **result_display**   | 正解・ランキング表示           | 「次へ」クリック                 | question_display または finished | 最終設問後は finished へ |
| **finished**         | 「ありがとうございました」画面 | 「再開」クリック                 | standby                          | セッション再初期化       |
